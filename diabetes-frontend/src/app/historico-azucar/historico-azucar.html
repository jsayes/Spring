<div class="historico-container" *ngIf="paciente">
  <h3>Historial de Azúcar para {{ paciente.nombre }} {{ paciente.apellido }}</h3>

  <div class="add-registro-form">
    <h4>Agregar Nuevo Registro de Azúcar</h4>
    <div class="form-group">
      <label for="newValorAzucar">Valor del Azúcar (mg/dL):</label>
      <input type="number" id="newValorAzucar" [(ngModel)]="newValorAzucar" name="newValorAzucar" required>
    </div>
    <div class="form-group">
      <label for="newComentario">Comentario (opcional):</label>
      <input type="text" id="newComentario" [(ngModel)]="newComentario" name="newComentario">
    </div>
    <button (click)="addRegistro()">Añadir Registro</button>
  </div>

  <div *ngIf="historico.length > 0; else noHistorico">
    <table class="historico-table">
      <thead>
        <tr>
          <th>ID Registro</th>
          <th>Valor Azúcar (mg/dL)</th>
           <th>Comentario</th> <th>Fecha y Hora</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let registro of historico">
          <td>{{ registro.id }}</td>
          <td>{{ registro.valorAzucar }}</td>
          <td>{{ registro.comentario || 'N/A' }}</td> <td>{{ registro.fechaRegistro | date:'medium' }}</td>
          <td>
            <button class="delete-button" (click)="deleteRegistro(registro.id)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <ng-template #noHistorico>
    <p class="no-records-message">No hay registros de azúcar para este paciente.</p>
  </ng-template>
</div>
